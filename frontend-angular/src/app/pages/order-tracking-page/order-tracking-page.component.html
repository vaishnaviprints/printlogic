<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50">
  <!-- Header -->
  <header class="border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3 cursor-pointer" (click)="navigateTo('/')">
        <div class="w-10 h-10 rounded-lg bg-indigo-600 flex items-center justify-center">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
          </svg>
        </div>
        <h1 class="text-xl font-bold">Vaishnavi Printers</h1>
      </div>
      
      <nav class="hidden md:flex gap-6">
        <button (click)="navigateTo('/')" class="hover:text-indigo-600">Home</button>
        <button (click)="navigateTo('/track')" class="text-indigo-600 font-semibold">Track Order</button>
        <button (click)="navigateTo('/contact')" class="hover:text-indigo-600">Contact</button>
      </nav>
      
      <div class="flex gap-3">
        <button *ngIf="!isLoggedIn" (click)="navigateTo('/login')" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">Login</button>
        <button *ngIf="!isLoggedIn" (click)="navigateTo('/register')" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">Sign Up</button>
        <button *ngIf="isLoggedIn" (click)="navigateTo('/my-orders')" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">My Orders</button>
      </div>
    </div>
  </header>

  <div class="max-w-6xl mx-auto px-4 py-12">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">Track Your Order</h2>
      <p class="text-lg text-gray-600">
        {{ isLoggedIn ? 'Your recent orders' : 'Enter Order Number OR Mobile/Email' }}
      </p>
    </div>

    <!-- Public Tracking Form -->
    <div *ngIf="!isLoggedIn" class="space-y-6">
      <div class="bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto">
        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
          <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          Track Your Orders
        </h3>
        <p class="text-gray-600 mb-4">Provide Order Number OR Mobile/Email</p>
        
        <form (ngSubmit)="handlePublicTracking()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Order Number (Optional)</label>
            <input formControlName="orderNumber" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="ORD-2025-001234" />
          </div>
          
          <div class="text-center text-sm font-medium text-gray-500">-- OR --</div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Mobile Number (Optional)</label>
            <input type="tel" formControlName="mobile" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="+91 9618667700" />
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Email Address (Optional)</label>
            <input type="email" formControlName="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="your.email&#64;example.com" />
          </div>
          
          <button type="submit" [disabled]="loading" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg disabled:opacity-50 transition-colors">
            {{ loading ? 'Searching...' : 'Track Orders' }}
          </button>
        </form>
      </div>

      <!-- Found Orders -->
      <div *ngIf="publicOrders.length > 0" class="space-y-4">
        <h3 class="text-2xl font-bold">Found {{ publicOrders.length }} Order(s)</h3>
        <div *ngFor="let order of publicOrders" class="bg-white rounded-lg shadow-lg p-6 border-2">
          <div class="flex justify-between mb-4">
            <div>
              <h3 class="text-lg font-semibold mb-2">Order #{{ order.id }}</h3>
              <p class="text-sm text-gray-600">{{ order.created_at | date }}</p>
            </div>
            <div>
              <span [class]="'px-3 py-1 rounded-full text-sm font-medium ' + getStatusColor(order.status)">
                {{ order.status }}
              </span>
              <div class="text-xl font-bold text-indigo-600 mt-2">₹{{ order.total?.toLocaleString() }}</div>
            </div>
          </div>
          <div class="space-y-2 text-sm">
            <div><span class="text-gray-600">Customer:</span> <span class="font-medium">{{ order.customer_name }}</span></div>
            <div *ngIf="order.vendor_name"><span class="text-gray-600">Vendor:</span> <span class="font-medium">{{ order.vendor_name }}</span></div>
            <div *ngIf="order.total_pages"><span class="text-gray-600">Pages:</span> <span class="font-medium">{{ order.total_pages }}</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- User Orders -->
    <div *ngIf="isLoggedIn" class="space-y-6">
      <div *ngIf="loading" class="text-center py-12">Loading...</div>
      
      <div *ngIf="!loading && userOrders.length === 0" class="bg-white rounded-lg shadow-lg p-12 text-center">
        <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
        </svg>
        <p class="text-gray-600 mb-4">No orders yet</p>
        <button (click)="navigateTo('/print')" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Create Order</button>
      </div>
      
      <div *ngIf="!loading && userOrders.length > 0">
        <h3 class="text-2xl font-bold mb-4">Your Recent Orders</h3>
        <div *ngFor="let order of userOrders" class="bg-white rounded-lg shadow-lg p-6 border-2 mb-4">
          <div class="flex justify-between mb-4">
            <div>
              <h3 class="text-lg font-semibold mb-2">Order #{{ order.id }}</h3>
              <p class="text-sm text-gray-600">{{ order.created_at | date }}</p>
            </div>
            <div>
              <span [class]="'px-3 py-1 rounded-full text-sm font-medium ' + getStatusColor(order.status)">
                {{ order.status }}
              </span>
              <div class="text-xl font-bold text-indigo-600 mt-2">₹{{ order.total?.toLocaleString() }}</div>
            </div>
          </div>
          <div class="space-y-2 text-sm">
            <div><span class="text-gray-600">Customer:</span> <span class="font-medium">{{ order.customer_name }}</span></div>
            <div *ngIf="order.vendor_name"><span class="text-gray-600">Vendor:</span> <span class="font-medium">{{ order.vendor_name }}</span></div>
            <div *ngIf="order.total_pages"><span class="text-gray-600">Pages:</span> <span class="font-medium">{{ order.total_pages }}</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
